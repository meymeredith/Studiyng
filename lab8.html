<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body body onload="draw();">  
    <div class="container">
        <canvas id="cnvs" width="600" height="600">
		</canvas><br>
        <script>
            var ctx, imgData, canvas;
            canvas = document.getElementById("cnvs");
            ctx = canvas.getContext("2d");

            function setPixel(x, y, c){ 
                var index = 4 * (x + canvas.width * y); 
                imgData.data[index + 0] = c.r;
                imgData.data[index + 1] = c.g;
                imgData.data[index + 2] = c.b;
                imgData.data[index + 3] = c.a;
                return c;
            }

            function Rastr(x, y, z){
                var xs, ys, zs; 
                var scale, k; 
                var I_D, lx, ly, lz; 
                
                scale = 200, k = -15; 
                lx = 0, ly = 0.5,	lz = 0.7;
                xs = Math.round(k * x /(z + k) * scale) + 300;
                ys = Math.round(k * y /(z + k) * scale) + 300;

                I_D = (x * lx + y * ly + z * lz);

                if (I_D > 0)
                    setPixel(xs, ys, {r: 255, g: 0, b: 0, a: 255});
                else
                    setPixel(xs, ys, {r: 0, g: 0, b: 0, a:255}); 
            }

            function calc_coords(){	
                var x, y, z;	
                x = -1;
                while (x <= 1){
                    y = -1;
                    while (y <= 1){
                        if (1 - x * x - y * y >= 0){	
                            z = Math.sqrt(1 - x * x - y * y);
                            Rastr(x, y, z);
                        }
                        y += 0.003;
                    }
                    x += 0.003;
                }
            }

            function draw(){ 	
                imgData = ctx.createImageData(600, 600); 
                ctx.putImageData(imgData, 0, 0);
                calc_coords();  
                ctx.putImageData(imgData, 0, 0); 
            }
        </script>
</body>
</html>